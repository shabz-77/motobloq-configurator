(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const _="modulepreload",P=function(e){return"/"+e},y={},g=function(n,s,i){let t=Promise.resolve();if(s&&s.length>0){let S=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");t=S(s.map(l=>{if(l=P(l),l in y)return;y[l]=!0;const m=l.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":_,m||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),m)return new Promise((E,v)=>{c.addEventListener("load",E),c.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return t.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return n().catch(o)})},R={async init(e="arcware",n="stream-container"){const s=document.getElementById(n);if(!s)throw console.error("âŒ Stream container not found:",n),new Error("Stream container missing");const i={container:s};if(e==="arcware"){const{initArcware:t}=await g(async()=>{const{initArcware:r}=await import("./arcware-EWVYHxHy.js");return{initArcware:r}},[]),o=await t(i);return w(o)}if(e==="streampixel"){const{initStreamPixel:t}=await g(async()=>{const{initStreamPixel:r}=await import("./streampixel-qIsOzm4w.js");return{initStreamPixel:r}},[]),o=await t(i);return w(o)}throw new Error("Unknown provider: "+e)}};function w(e){if(!e)throw new Error("Provider returned null/undefined");return{type:e.type||"unknown",send:(n,s)=>{typeof e.send=="function"?e.send(n,s):console.warn("âš ï¸ Provider has no send()")},onResponse:n=>{typeof e.onResponse=="function"?e.onResponse(n):console.warn("âš ï¸ Provider has no onResponse()")},onReady:n=>{typeof e.onReady=="function"?e.onReady(n):console.warn("âš ï¸ Provider has no onReady()")}}}window.closeLoading=()=>{const e=document.getElementById("loading-screen");e&&(e.style.display="none")};function h(e){const n=document.getElementById("toast");n&&(n.innerText=e,n.style.display="block",setTimeout(()=>n.style.display="none",2e3))}window.openShareModal=()=>{const e=document.getElementById("shareModal");e&&(e.style.display="flex")};window.closeShareModal=()=>{const e=document.getElementById("shareModal");e&&(e.style.display="none")};const p=await R.init("streampixel");let d=JSON.parse(localStorage.getItem("userSpec")||"{}");window.location.search.length<=1&&(d={},localStorage.removeItem("userSpec"));p.onResponse(e=>{try{e.action?.startsWith("VS_")&&e.value!=="None"&&(d[e.action]=e.value,localStorage.setItem("userSpec",JSON.stringify(d)),console.log("âœ… Saved from UE:",e.action,"=",e.value))}catch(n){console.warn("Failed to handle response:",n)}});const L=new URLSearchParams(window.location.search),u={};L.forEach((e,n)=>u[n]=e);Object.keys(u).length>0?(console.log("âœ… Found config in URL:",u),d={...u},localStorage.setItem("userSpec",JSON.stringify(d))):console.info("â„¹ï¸ No URL config to apply");p.onReady(()=>{console.log("ðŸŸ¢ Stream Ready!");const e=document.getElementById("loading-screen");if(e&&(e.style.display="none"),Object.keys(u).length>0){console.log("âœ… Applying URL config to UE...");let n=0;const s=300;Object.entries(u).forEach(([i,t])=>{setTimeout(()=>{console.log(`ðŸ“¤ Sending from URL: ${i} = ${t}`),p.send(i,t)},n),n+=s})}});window.copyShareLink=()=>{const e=new URLSearchParams(d),n=`${window.location.origin}${window.location.pathname}?${e.toString()}`;navigator.clipboard.writeText(n).then(()=>h("Link copied!")),typeof emailjs<"u"?emailjs.send("service_x60sll8","template_0gersxn",{user_name:"Silent Event",user_email:"system@motobloq.com",user_message:"User copied share link",config_url:n}):console.warn("emailjs not loaded, skipping silent email")};window.sendShareEmail=()=>{const e=document.getElementById("share_name"),n=document.getElementById("share_email"),s=document.getElementById("share_message"),i=e?.value.trim()??"",t=n?.value.trim()??"",o=s?.value.trim()??"";if(!i||!t){alert("Please enter your name and email.");return}const r=new URLSearchParams(d),a=`${window.location.origin}${window.location.pathname}?${r.toString()}`;if(typeof emailjs>"u"){console.error("emailjs is not loaded"),alert("Email service not available.");return}emailjs.send("service_x60sll8","template_0gersxn",{user_name:i,user_email:t,user_message:o,config_url:a}).then(()=>{h("Email sent!"),window.closeShareModal()}).catch(()=>alert("Error sending email."))};export{g as _};
